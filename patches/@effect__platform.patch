diff --git a/dist/cjs/internal/httpClient.js b/dist/cjs/internal/httpClient.js
index 00a99fb5fd26602e5f329c4a419eb2f28a4db8b4..e007828dbb3d4c6dd04ac9a628dbbf8c3e0d5ffa 100644
--- a/dist/cjs/internal/httpClient.js
+++ b/dist/cjs/internal/httpClient.js
@@ -105,11 +105,13 @@ const make = f => makeWith(effect => Effect.flatMap(effect, request => Effect.wi
     kind: "client",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     span.attribute("server.address", url.origin);
     if (url.port !== "") {
       span.attribute("server.port", +url.port);
     }
+    span.attribute("http.url", url.toString());
     span.attribute("url.full", url.toString());
     span.attribute("url.path", url.pathname);
     span.attribute("url.scheme", url.protocol.slice(0, -1));
@@ -125,6 +127,7 @@ const make = f => makeWith(effect => Effect.flatMap(effect, request => Effect.wi
     request = fiber.getFiberRef(currentTracerPropagation) ? internalRequest.setHeaders(request, TraceContext.toHeaders(span)) : request;
     return Effect.tap(Effect.withParentSpan(f(request, url, controller.signal, fiber), span), response => {
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/cjs/internal/httpClient.js.map b/dist/cjs/internal/httpClient.js.map
index 5b5a5b395d51373e9e75e84f1ef699438d53370a..877826d7a7c5d3943034c57b17ce3543790415d6 100644
--- a/dist/cjs/internal/httpClient.js.map
+++ b/dist/cjs/internal/httpClient.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpClient.js","names":["Cause","_interopRequireWildcard","require","Context","Effect","FiberRef","_Function","_GlobalValue","Inspectable","Layer","_Pipeable","Predicate","Ref","Schedule","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalRequest","internalResponse","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","globalValue","unsafeMake","constFalse","withTracerDisabledWhen","dual","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","pipeArguments","arguments","BaseProto","toJSON","_id","url","options","execute","head","post","put","patch","del","isClient","hasProperty","makeWith","postprocess","preprocess","create","request","make","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","serviceFunctions","transform","client","filterStatus","transformResponse","filterStatusOk","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","filterOrFail","orFailWith","mapRequest","map","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","retryTransient","while","ScheduleTypeId","undefined","isTransientError","or","schedule","times","error","TimeoutExceptionTypeId","isTransientHttpError","isHttpClientError","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","args","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpClient.js","names":["Cause","_interopRequireWildcard","require","Context","Effect","FiberRef","_Function","_GlobalValue","Inspectable","Layer","_Pipeable","Predicate","Ref","Schedule","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalRequest","internalResponse","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","globalValue","unsafeMake","constFalse","withTracerDisabledWhen","dual","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","pipeArguments","arguments","BaseProto","toJSON","_id","url","options","execute","head","post","put","patch","del","isClient","hasProperty","makeWith","postprocess","preprocess","create","request","make","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","serviceFunctions","transform","client","filterStatus","transformResponse","filterStatusOk","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","filterOrFail","orFailWith","mapRequest","map","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","retryTransient","while","ScheduleTypeId","undefined","isTransientError","or","schedule","times","error","TimeoutExceptionTypeId","isTransientHttpError","isHttpClientError","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","args","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/cjs/internal/httpMiddleware.js b/dist/cjs/internal/httpMiddleware.js
index e07b89d2f27fc9e89f4d4c83921994e6993af778..f908208219cbadc956a4453ce530636975f2e888 100644
--- a/dist/cjs/internal/httpMiddleware.js
+++ b/dist/cjs/internal/httpMiddleware.js
@@ -78,8 +78,10 @@ const tracer = exports.tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRun
     kind: "server",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     if (url !== undefined) {
+      span.attribute("http.url", url.toString());
       span.attribute("url.full", url.toString());
       span.attribute("url.path", url.pathname);
       const query = url.search.slice(1);
@@ -100,6 +102,7 @@ const tracer = exports.tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRun
     return Effect.flatMap(Effect.exit(Effect.withParentSpan(httpApp, span)), exit => {
       const response = ServerError.exitResponse(exit);
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/cjs/internal/httpMiddleware.js.map b/dist/cjs/internal/httpMiddleware.js.map
index 290d35fd73618949f81db872ee13e4ba4675108a..5348ba62b755a1b1d33ad96b23e6a951920fa93c 100644
--- a/dist/cjs/internal/httpMiddleware.js.map
+++ b/dist/cjs/internal/httpMiddleware.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpMiddleware.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRef","_Function","_GlobalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","internalHttpApp","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","middleware","exports","loggerDisabled","globalValue","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","currentTracerDisabledWhen","constFalse","withTracerDisabledWhen","dual","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","request","unsafeGet","currentContext","HttpServerRequest","withLogSpan","flatMap","exit","getFiberRef","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","context","params","searchParamsFromURL","URL","originalUrl","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","headersFromRequest","unsafeFromRecord","headersFromRequestOptions","preResponseHandler","succeed","setHeaders","empty","appendPreResponseHandler"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpMiddleware.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRef","_Function","_GlobalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","internalHttpApp","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","make","middleware","exports","loggerDisabled","globalValue","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","currentTracerDisabledWhen","constFalse","withTracerDisabledWhen","dual","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","request","unsafeGet","currentContext","HttpServerRequest","withLogSpan","flatMap","exit","getFiberRef","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","context","params","searchParamsFromURL","URL","originalUrl","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","headersFromRequest","unsafeFromRecord","headersFromRequestOptions","preResponseHandler","succeed","setHeaders","empty","appendPreResponseHandler"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/dts/internal/httpClient.d.ts.map b/dist/dts/internal/httpClient.d.ts.map
index 264797465910ce1c769270241af5bc9a193932f6..cd5ca517d735a1393fcb989d115d85f08a20131b 100644
--- a/dist/dts/internal/httpClient.d.ts.map
+++ b/dist/dts/internal/httpClient.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"httpClient.d.ts","sourceRoot":"","sources":["../../../src/internal/httpClient.ts"],"names":[],"mappings":"AAEA,OAAO,KAAK,MAAM,MAAM,eAAe,CAAA;AAWvC,OAAO,KAAK,KAAK,MAAM,cAAc,CAAA;AAIrC,OAAO,KAAK,KAAK,MAAM,MAAM,kBAAkB,CAAA;AAC/C,OAAO,KAAK,KAAK,MAAM,uBAAuB,CAAA;AAC9C,OAAO,KAAK,KAAK,aAAa,MAAM,yBAAyB,CAAA;AAC7D,OAAO,KAAK,KAAK,cAAc,MAAM,0BAA0B,CAAA;AAsL/D,eAAO;AACL,gBAAgB;AAChB,GAAG;AACH,gBAAgB;AAChB,OAAO;AACP,gBAAgB;AAChB,GAAG;AACH,gBAAgB;AAChB,IAAI;AACJ,gBAAgB;AAChB,OAAO;AACP,gBAAgB;AAChB,KAAK;AACL,gBAAgB;AAChB,IAAI;AACJ,gBAAgB;AAChB,GAAG,wNAC2B,CAAA"}
\ No newline at end of file
+{"version":3,"file":"httpClient.d.ts","sourceRoot":"","sources":["../../../src/internal/httpClient.ts"],"names":[],"mappings":"AAEA,OAAO,KAAK,MAAM,MAAM,eAAe,CAAA;AAWvC,OAAO,KAAK,KAAK,MAAM,cAAc,CAAA;AAIrC,OAAO,KAAK,KAAK,MAAM,MAAM,kBAAkB,CAAA;AAC/C,OAAO,KAAK,KAAK,MAAM,uBAAuB,CAAA;AAC9C,OAAO,KAAK,KAAK,aAAa,MAAM,yBAAyB,CAAA;AAC7D,OAAO,KAAK,KAAK,cAAc,MAAM,0BAA0B,CAAA;AAyL/D,eAAO;AACL,gBAAgB;AAChB,GAAG;AACH,gBAAgB;AAChB,OAAO;AACP,gBAAgB;AAChB,GAAG;AACH,gBAAgB;AAChB,IAAI;AACJ,gBAAgB;AAChB,OAAO;AACP,gBAAgB;AAChB,KAAK;AACL,gBAAgB;AAChB,IAAI;AACJ,gBAAgB;AAChB,GAAG,wNAC2B,CAAA"}
\ No newline at end of file
diff --git a/dist/esm/internal/httpClient.js b/dist/esm/internal/httpClient.js
index 6e3de1693f6dd68a5decf3be6d8d26e2ca72b87a..89c510b545c84d16c596d59d0a3cea2f4eeada03 100644
--- a/dist/esm/internal/httpClient.js
+++ b/dist/esm/internal/httpClient.js
@@ -96,11 +96,13 @@ export const make = f => makeWith(effect => Effect.flatMap(effect, request => Ef
     kind: "client",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     span.attribute("server.address", url.origin);
     if (url.port !== "") {
       span.attribute("server.port", +url.port);
     }
+    span.attribute("http.url", url.toString());
     span.attribute("url.full", url.toString());
     span.attribute("url.path", url.pathname);
     span.attribute("url.scheme", url.protocol.slice(0, -1));
@@ -116,6 +118,7 @@ export const make = f => makeWith(effect => Effect.flatMap(effect, request => Ef
     request = fiber.getFiberRef(currentTracerPropagation) ? internalRequest.setHeaders(request, TraceContext.toHeaders(span)) : request;
     return Effect.tap(Effect.withParentSpan(f(request, url, controller.signal, fiber), span), response => {
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/esm/internal/httpClient.js.map b/dist/esm/internal/httpClient.js.map
index 73e6145153393a824740bc61ddcefc508d452b23..55c854a9576c0a3bd1cb58766129cae5ccb053c6 100644
--- a/dist/esm/internal/httpClient.js.map
+++ b/dist/esm/internal/httpClient.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpClient.js","names":["Cause","Context","Effect","FiberRef","constFalse","dual","globalValue","Inspectable","Layer","pipeArguments","Predicate","Ref","Schedule","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalRequest","internalResponse","TypeId","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","unsafeMake","withTracerDisabledWhen","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","arguments","BaseProto","toJSON","_id","get","url","options","execute","head","post","put","patch","del","isClient","u","hasProperty","makeWith","postprocess","preprocess","Object","create","request","make","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","serviceFunctions","transform","client","filterStatus","transformResponse","filterStatusOk","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","filterOrFail","orFailWith","mapRequest","map","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","retryTransient","while","ScheduleTypeId","undefined","isTransientError","or","schedule","times","error","TimeoutExceptionTypeId","isTransientHttpError","isHttpClientError","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","args","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpClient.js","names":["Cause","Context","Effect","FiberRef","constFalse","dual","globalValue","Inspectable","Layer","pipeArguments","Predicate","Ref","Schedule","Scope","Cookies","Headers","Error","TraceContext","UrlParams","internalRequest","internalResponse","TypeId","Symbol","for","tag","GenericTag","currentTracerDisabledWhen","unsafeMake","withTracerDisabledWhen","self","pred","locally","currentTracerPropagation","withTracerPropagation","enabled","ClientProto","pipe","arguments","BaseProto","toJSON","_id","get","url","options","execute","head","post","put","patch","del","isClient","u","hasProperty","makeWith","postprocess","preprocess","Object","create","request","make","f","effect","flatMap","withFiberRuntime","fiber","scope","unsafeGet","getFiberRef","currentContext","controller","AbortController","addAbort","addFinalizer","sync","abort","urlResult","makeUrl","urlParams","hash","_tag","fail","RequestError","reason","cause","left","right","tracerDisabled","currentTracerEnabled","zipRight","signal","useSpan","method","kind","captureStackTrace","span","attribute","origin","port","toString","pathname","protocol","slice","query","search","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","name","String","setHeaders","toHeaders","tap","withParentSpan","response","status","succeed","serviceFunctions","transform","client","filterStatus","transformResponse","filterStatusOk","catchTag","catchTags","cases","catchAll","filterOrElse","orElse","filterOrFail","orFailWith","mapRequest","map","mapRequestEffect","mapRequestInput","mapRequestInputEffect","retry","policy","retryTransient","while","ScheduleTypeId","undefined","isTransientError","or","schedule","times","error","TimeoutExceptionTypeId","isTransientHttpError","isHttpClientError","tapRequest","withCookiesRef","ref","update","cookies","merge","isEmpty","setHeader","toCookieHeader","followRedirects","args","maxRedirects","loop","redirects","location","setUrl","layerMergedContext","context","mapInputContext","input"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/dist/esm/internal/httpMiddleware.js b/dist/esm/internal/httpMiddleware.js
index a40a8982cef881f61c5cf0b9a30df7df19ae0b8d..98b7a87814be7143c5276eb02eacdaa98fc5b4ec 100644
--- a/dist/esm/internal/httpMiddleware.js
+++ b/dist/esm/internal/httpMiddleware.js
@@ -68,8 +68,10 @@ export const tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRuntime(fiber
     kind: "server",
     captureStackTrace: false
   }, span => {
+    span.attribute("http.method", request.method);
     span.attribute("http.request.method", request.method);
     if (url !== undefined) {
+      span.attribute("http.url", url.toString());
       span.attribute("url.full", url.toString());
       span.attribute("url.path", url.pathname);
       const query = url.search.slice(1);
@@ -90,6 +92,7 @@ export const tracer = /*#__PURE__*/make(httpApp => Effect.withFiberRuntime(fiber
     return Effect.flatMap(Effect.exit(Effect.withParentSpan(httpApp, span)), exit => {
       const response = ServerError.exitResponse(exit);
       span.attribute("http.response.status_code", response.status);
+      span.attribute("http.status_code", response.status);
       const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames);
       for (const name in redactedHeaders) {
         span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]));
diff --git a/dist/esm/internal/httpMiddleware.js.map b/dist/esm/internal/httpMiddleware.js.map
index e039b064b3707c92d906fe00497fe8459be351e0..16eb7b4f33c1ad51f69394e0bbf86bee67ffaa9f 100644
--- a/dist/esm/internal/httpMiddleware.js.map
+++ b/dist/esm/internal/httpMiddleware.js.map
@@ -1 +1 @@
-{"version":3,"file":"httpMiddleware.js","names":["Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","internalHttpApp","make","middleware","loggerDisabled","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","set","currentTracerDisabledWhen","withTracerDisabledWhen","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","request","unsafeGet","currentContext","HttpServerRequest","withLogSpan","flatMap","exit","getFiberRef","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","context","params","searchParamsFromURL","URL","originalUrl","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","headersFromRequest","unsafeFromRecord","headersFromRequestOptions","preResponseHandler","succeed","setHeaders","empty","appendPreResponseHandler"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
+{"version":3,"file":"httpMiddleware.js","names":["Context","Effect","FiberRef","constFalse","dual","globalValue","Layer","Option","Headers","ServerError","ServerRequest","ServerResponse","TraceContext","internalHttpApp","make","middleware","loggerDisabled","Symbol","for","unsafeMake","withLoggerDisabled","self","zipRight","set","currentTracerDisabledWhen","withTracerDisabledWhen","pred","locally","withTracerDisabledWhenEffect","withTracerDisabledForUrls","urls","req","includes","url","logger","httpApp","counter","withFiberRuntime","fiber","request","unsafeGet","currentContext","HttpServerRequest","withLogSpan","flatMap","exit","getFiberRef","_tag","response","cause","causeResponseStripped","annotateLogs","log","value","method","status","tracer","disabled","getOrUndefined","toURL","undefined","username","password","redactedHeaderNames","currentRedactedNames","redactedHeaders","redact","headers","useSpan","parent","fromHeaders","kind","captureStackTrace","span","attribute","toString","pathname","query","search","slice","protocol","name","String","remoteAddress","withParentSpan","exitResponse","xForwardedHeaders","updateService","modify","split","trim","searchParamsParser","context","params","searchParamsFromURL","URL","originalUrl","add","ParsedSearchParams","cors","options","opts","allowedOrigins","allowedMethods","allowedHeaders","exposedHeaders","credentials","isAllowedOrigin","origin","allowOrigin","originHeader","length","vary","allowMethods","join","allowCredentials","allowHeaders","accessControlRequestHeaders","exposeHeaders","maxAge","headersFromRequest","unsafeFromRecord","headersFromRequestOptions","preResponseHandler","succeed","setHeaders","empty","appendPreResponseHandler"],"sources":["../../../src/internal/httpMiddleware.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
\ No newline at end of file
diff --git a/src/internal/httpClient.ts b/src/internal/httpClient.ts
index 1c684b7b5e7b97fdf29489ecf1483c507cf6da5b..7cc1e26f4789c3885c49c492f3163a30df5f9d8f 100644
--- a/src/internal/httpClient.ts
+++ b/src/internal/httpClient.ts
@@ -157,11 +157,13 @@ export const make = (
             `http.client ${request.method}`,
             { kind: "client", captureStackTrace: false },
             (span) => {
+              span.attribute("http.method", request.method)
               span.attribute("http.request.method", request.method)
               span.attribute("server.address", url.origin)
               if (url.port !== "") {
                 span.attribute("server.port", +url.port)
               }
+              span.attribute("http.url", url.toString())
               span.attribute("url.full", url.toString())
               span.attribute("url.path", url.pathname)
               span.attribute("url.scheme", url.protocol.slice(0, -1))
@@ -189,6 +191,7 @@ export const make = (
                 ),
                 (response) => {
                   span.attribute("http.response.status_code", response.status)
+                  span.attribute("http.status_code", response.status)
                   const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames)
                   for (const name in redactedHeaders) {
                     span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]))
diff --git a/src/internal/httpMiddleware.ts b/src/internal/httpMiddleware.ts
index aa1ff93f02ecab4842d9bcd3795d158508fb343d..c6607ff02e5820e814920ee6b48f40ea9f717c8a 100644
--- a/src/internal/httpMiddleware.ts
+++ b/src/internal/httpMiddleware.ts
@@ -129,8 +129,10 @@ export const tracer = make((httpApp) =>
         captureStackTrace: false
       },
       (span) => {
+        span.attribute("http.method", request.method)
         span.attribute("http.request.method", request.method)
         if (url !== undefined) {
+          span.attribute("http.url", url.toString())
           span.attribute("url.full", url.toString())
           span.attribute("url.path", url.pathname)
           const query = url.search.slice(1)
@@ -153,6 +155,7 @@ export const tracer = make((httpApp) =>
           (exit) => {
             const response = ServerError.exitResponse(exit)
             span.attribute("http.response.status_code", response.status)
+            span.attribute("http.status_code", response.status)
             const redactedHeaders = Headers.redact(response.headers, redactedHeaderNames)
             for (const name in redactedHeaders) {
               span.attribute(`http.response.header.${name}`, String(redactedHeaders[name]))
